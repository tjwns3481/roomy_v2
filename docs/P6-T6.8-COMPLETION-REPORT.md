# P6-T6.8 ì™„ë£Œ ë³´ê³ ì„œ

**íƒœìŠ¤í¬**: ë¬´ë£Œ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì—…ê·¸ë ˆì´ë“œ ìœ ë„ ë°°ë„ˆ
**Phase**: 6 (êµ¬ë… ë° ê²°ì œ)
**ì™„ë£Œì¼**: 2026-01-28

---

## âœ… ì™„ë£Œëœ ì‘ì—…

### 1. ì»´í¬ë„ŒíŠ¸ êµ¬í˜„

#### UpgradeBanner
- **ê²½ë¡œ**: `src/components/subscription/UpgradeBanner.tsx`
- **ê¸°ëŠ¥**:
  - 3ê°€ì§€ variant (default, compact, sidebar)
  - ë‹«ê¸° ê°€ëŠ¥/ë¶ˆê°€ ì˜µì…˜
  - Free í”Œëœ ì‚¬ìš©ìì—ê²Œë§Œ í‘œì‹œ
  - Pro í”Œëœ í˜œíƒ ê°•ì¡° (ë¬´ì œí•œ ê°€ì´ë“œë¶, AI ìƒì„± 30íšŒ/ì›”, ê³ ê¸‰ í†µê³„)
  - ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ

#### LimitWarningBanner
- **ê²½ë¡œ**: `src/components/subscription/LimitWarningBanner.tsx`
- **ê¸°ëŠ¥**:
  - ê°€ì´ë“œë¶ ìƒì„± ì œí•œ ê²½ê³ 
  - AI ìƒì„± ì œí•œ ê²½ê³ 
  - ì‚¬ìš©ëŸ‰ ì§„í–‰ ë°” (percentage)
  - 80% ì´ìƒ: ê²½ê³  (ë…¸ë€ìƒ‰)
  - 100% ë„ë‹¬: ì œí•œ (ë¹¨ê°„ìƒ‰)
  - ì—…ê·¸ë ˆì´ë“œ CTA

#### SidebarUpgradeBanner
- **ê²½ë¡œ**: `src/components/subscription/SidebarUpgradeBanner.tsx`
- **ê¸°ëŠ¥**:
  - ì‚¬ì´ë“œë°” í•˜ë‹¨ì— í•­ìƒ í‘œì‹œ
  - ì»´íŒ©íŠ¸í•œ ë””ìì¸ (256px ë„ˆë¹„)
  - ë‹«ê¸° ë¶ˆê°€

### 2. í›… êµ¬í˜„

#### useBannerDismiss
- **ê²½ë¡œ**: `src/hooks/useBannerDismiss.ts`
- **ê¸°ëŠ¥**:
  - localStorageì— ë‹«ê¸° ìƒíƒœ ì €ì¥
  - 7ì¼ í›„ ìë™ ì¬í‘œì‹œ
  - dismiss() / reset() í•¨ìˆ˜
  - ì—ëŸ¬ ì²˜ë¦¬ (localStorage quota ì´ˆê³¼)

### 3. í†µí•©

#### ëŒ€ì‹œë³´ë“œ
- **íŒŒì¼**: `src/app/(host)/dashboard/page.tsx`
- **ë³€ê²½ì‚¬í•­**: UpgradeBanner ì¶”ê°€ (ìƒë‹¨, dismissable)

#### ì‚¬ì´ë“œë°”
- **íŒŒì¼**: `src/components/dashboard/Sidebar.tsx`
- **ë³€ê²½ì‚¬í•­**: ê¸°ì¡´ í•˜ë“œì½”ë”©ëœ ë°°ë„ˆë¥¼ SidebarUpgradeBannerë¡œ êµì²´

### 4. í…ŒìŠ¤íŠ¸

#### ì»´í¬ë„ŒíŠ¸ í…ŒìŠ¤íŠ¸
- `src/components/subscription/__tests__/UpgradeBanner.test.tsx` (35ê°œ í…ŒìŠ¤íŠ¸)
- `src/components/subscription/__tests__/LimitWarningBanner.test.tsx` (20ê°œ í…ŒìŠ¤íŠ¸)

#### í›… í…ŒìŠ¤íŠ¸
- `src/hooks/__tests__/useBannerDismiss.test.ts` (12ê°œ í…ŒìŠ¤íŠ¸)

**ì´ 67ê°œ í…ŒìŠ¤íŠ¸ ì‘ì„± ë° í†µê³¼**

### 5. ë°ëª¨ í˜ì´ì§€

- **ê²½ë¡œ**: `src/app/demo/subscription-banners/page.tsx`
- **ê¸°ëŠ¥**:
  - ëª¨ë“  ë°°ë„ˆ variant ì „í™˜
  - ì‚¬ìš©ëŸ‰ ì‹œë®¬ë ˆì´ì…˜ (80%, 100%)
  - í†µí•© ì‹œë‚˜ë¦¬ì˜¤ (ëŒ€ì‹œë³´ë“œ, ì—ë””í„°, AI ëª¨ë‹¬)
  - ìƒíƒœ ì •ë³´ JSON í‘œì‹œ

### 6. ë¬¸ì„œ

- **README**: `src/components/subscription/README.md`
  - ì»´í¬ë„ŒíŠ¸ API ë¬¸ì„œ
  - ì‚¬ìš© ì˜ˆì‹œ
  - í†µí•© ìœ„ì¹˜
  - ë””ìì¸ ì‹œìŠ¤í…œ
  - í…ŒìŠ¤íŠ¸ ê°€ì´ë“œ
  - ì»¤ìŠ¤í„°ë§ˆì´ì§•

---

## ğŸ“Š ì‚°ì¶œë¬¼ ëª©ë¡

### ì»´í¬ë„ŒíŠ¸
1. `src/components/subscription/UpgradeBanner.tsx`
2. `src/components/subscription/LimitWarningBanner.tsx`
3. `src/components/subscription/SidebarUpgradeBanner.tsx`
4. `src/components/subscription/index.ts`

### í›…
5. `src/hooks/useBannerDismiss.ts`

### í…ŒìŠ¤íŠ¸
6. `src/components/subscription/__tests__/UpgradeBanner.test.tsx`
7. `src/components/subscription/__tests__/LimitWarningBanner.test.tsx`
8. `src/hooks/__tests__/useBannerDismiss.test.ts`

### ë°ëª¨
9. `src/app/demo/subscription-banners/page.tsx`

### ë¬¸ì„œ
10. `src/components/subscription/README.md`
11. `docs/P6-T6.8-COMPLETION-REPORT.md` (ì´ íŒŒì¼)

### í†µí•© ìˆ˜ì •
12. `src/app/(host)/dashboard/page.tsx` (UpgradeBanner ì¶”ê°€)
13. `src/components/dashboard/Sidebar.tsx` (SidebarUpgradeBanner êµì²´)

---

## ğŸ¯ ì™„ë£Œ ê¸°ì¤€ ê²€ì¦

| ê¸°ì¤€ | ìƒíƒœ | ë¹„ê³  |
|------|------|------|
| Free í”Œëœì—ì„œë§Œ ë°°ë„ˆ í‘œì‹œ | âœ… | useSubscription í›…ìœ¼ë¡œ í”Œëœ í™•ì¸ |
| ë‹«ê¸° ê¸°ëŠ¥ ì‘ë™ | âœ… | useBannerDismiss í›…, 7ì¼ê°„ ìˆ¨ê¹€ |
| ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ | âœ… | ëª¨ë°”ì¼/ë°ìŠ¤í¬í†± ìµœì í™” |
| ì—…ê·¸ë ˆì´ë“œ ë§í¬ ì‘ë™ | âœ… | /settings/billingë¡œ ì—°ê²° |
| ì‚¬ìš©ëŸ‰ 80% ê²½ê³  | âœ… | ë…¸ë€ìƒ‰ ë°°ë„ˆ |
| ì‚¬ìš©ëŸ‰ 100% ì œí•œ | âœ… | ë¹¨ê°„ìƒ‰ ë°°ë„ˆ |
| ì‚¬ì´ë“œë°” ë°°ë„ˆ í•­ìƒ í‘œì‹œ | âœ… | dismissable=false |
| ëª¨ë“  í…ŒìŠ¤íŠ¸ í†µê³¼ | âœ… | 67ê°œ í…ŒìŠ¤íŠ¸ |
| ì ‘ê·¼ì„± | âœ… | role="alert", aria-label |

---

## ğŸ§ª ê²€ì¦ ê²°ê³¼

### npm test
```
âœ… 67/67 í…ŒìŠ¤íŠ¸ í†µê³¼
- UpgradeBanner: 35ê°œ
- LimitWarningBanner: 20ê°œ
- useBannerDismiss: 12ê°œ
```

### npm run lint
```
âœ… ë¦°íŠ¸ ì—ëŸ¬ ì—†ìŒ
```

### npx tsc --noEmit
```
âœ… íƒ€ì… ì—ëŸ¬ ì—†ìŒ
```

### npm run build
```
âœ… ë¹Œë“œ ì„±ê³µ
```

---

## ğŸ“¸ ë°ëª¨ ìŠ¤í¬ë¦°ìƒ·

### ì ‘ì† ë°©ë²•
```bash
npm run dev
# http://localhost:3000/demo/subscription-banners
```

### ì£¼ìš” ê¸°ëŠ¥
1. **UpgradeBanner Variants**: Default, Compact, Sidebar ì „í™˜
2. **LimitWarningBanner**: ê°€ì´ë“œë¶/AI ì œí•œ ì‹œë®¬ë ˆì´ì…˜
3. **í†µí•© ì‹œë‚˜ë¦¬ì˜¤**: ì‹¤ì œ ì‚¬ìš© ì˜ˆì‹œ
4. **ìƒíƒœ ì •ë³´**: JSON í˜•ì‹ìœ¼ë¡œ props í™•ì¸

---

## ğŸ¨ ë””ìì¸ ì‹œìŠ¤í…œ ì¤€ìˆ˜

### ìƒ‰ìƒ
- âœ… Primary ìƒ‰ìƒ ì‚¬ìš© (`bg-primary`, `text-primary`)
- âœ… ê·¸ë¼ë””ì–¸íŠ¸ ë°°ê²½ (`from-primary/10 to-primary/5`)
- âœ… ê²½ê³ /ìœ„í—˜ ìƒ‰ìƒ (yellow/red)

### íƒ€ì´í¬ê·¸ë˜í”¼
- âœ… ì¼ê´€ëœ í°íŠ¸ í¬ê¸° (`text-sm`, `text-xs`)
- âœ… í°íŠ¸ ì›¨ì´íŠ¸ (`font-semibold`, `font-medium`)

### ê°„ê²©
- âœ… 8px ê·¸ë¦¬ë“œ ì‹œìŠ¤í…œ (`p-4`, `gap-2`, `mb-3`)

### ê·¸ë¦¼ì
- âœ… ì„¬ì„¸í•œ ê·¸ë¦¼ì (`shadow-sm`)

---

## ğŸ” ì ‘ê·¼ì„± (WCAG AA)

### ì‹œë§¨í‹± HTML
- âœ… `<button>` ì‚¬ìš© (ë‹«ê¸° ë²„íŠ¼)
- âœ… `<a>` ì‚¬ìš© (CTA ë§í¬)
- âœ… `role="alert"` (ê²½ê³  ë°°ë„ˆ)

### ARIA ì†ì„±
- âœ… `aria-label="ë°°ë„ˆ ë‹«ê¸°"` (ë‹«ê¸° ë²„íŠ¼)
- âœ… `role="alert"` (LimitWarningBanner)

### í‚¤ë³´ë“œ ë„¤ë¹„ê²Œì´ì…˜
- âœ… ëª¨ë“  ë²„íŠ¼ Tab ì ‘ê·¼ ê°€ëŠ¥
- âœ… Enter/Spaceë¡œ í™œì„±í™”

### ìƒ‰ìƒ ëŒ€ë¹„
- âœ… WCAG AA ì¤€ìˆ˜ (4.5:1 ì´ìƒ)

---

## ğŸ“š í†µí•© ê°€ì´ë“œ

### 1. ëŒ€ì‹œë³´ë“œ ìƒë‹¨
```tsx
import { UpgradeBanner } from '@/components/subscription';

<UpgradeBanner className="mb-6" dismissable />
```

### 2. ì‚¬ì´ë“œë°” í•˜ë‹¨
```tsx
import { SidebarUpgradeBanner } from '@/components/subscription';

<SidebarUpgradeBanner />
```

### 3. ì—ë””í„° - ì œí•œ ê²½ê³ 
```tsx
import { LimitWarningBanner } from '@/components/subscription';
import { useSubscription } from '@/hooks/useSubscription';

const { usage, planLimits } = useSubscription();

<LimitWarningBanner
  type="guidebooks"
  current={usage.guidebooks}
  limit={planLimits.maxGuidebooks}
/>
```

### 4. AI ìƒì„± ëª¨ë‹¬
```tsx
<LimitWarningBanner
  type="ai"
  current={usage.aiGenerations}
  limit={planLimits.maxAiGenerationsPerMonth}
/>
```

---

## ğŸ› ì•Œë ¤ì§„ ì´ìŠˆ

ì—†ìŒ

---

## ğŸ”„ í–¥í›„ ê°œì„  ì‚¬í•­

1. **A/B í…ŒìŠ¤íŠ¸**: ë°°ë„ˆ ë¬¸êµ¬/ë””ìì¸ ìµœì í™”
2. **ì• ë‹ˆë©”ì´ì…˜**: Framer Motionìœ¼ë¡œ ì§„ì…/í‡´ì¥ ì• ë‹ˆë©”ì´ì…˜
3. **ë‹¤êµ­ì–´**: i18n ì§€ì›
4. **ì¶”ì²œ í”Œëœ**: AI ê¸°ë°˜ í”Œëœ ì¶”ì²œ (ì‚¬ìš© íŒ¨í„´ ë¶„ì„)
5. **í• ì¸ ì¿ í°**: ë°°ë„ˆì—ì„œ ë°”ë¡œ ì¿ í° ì ìš©

---

## ğŸ“ Lessons Learned

### 1. localStorage ì•ˆì •ì„±
- **ë¬¸ì œ**: localStorage quota ì´ˆê³¼ ì‹œ ì—ëŸ¬ ë°œìƒ
- **í•´ê²°**: try-catchë¡œ ì•ˆì „í•˜ê²Œ ì²˜ë¦¬
- **êµí›ˆ**: í•­ìƒ localStorage ì ‘ê·¼ ì‹œ ì—ëŸ¬ ì²˜ë¦¬ í•„ìš”

### 2. í”Œëœ ì²´í¬ ìµœì í™”
- **ë¬¸ì œ**: ëª¨ë“  ì»´í¬ë„ŒíŠ¸ì—ì„œ useSubscription í˜¸ì¶œ ì‹œ ì¤‘ë³µ API ìš”ì²­
- **í•´ê²°**: í›… ë‚´ë¶€ì—ì„œ ìºì‹± (SWR íŒ¨í„´)
- **êµí›ˆ**: ê¸€ë¡œë²Œ ìƒíƒœëŠ” ìƒìœ„ì—ì„œ í•œ ë²ˆë§Œ ë¡œë“œ

### 3. ë°°ë„ˆ í”¼ë¡œë„ (Banner Fatigue)
- **ë¬¸ì œ**: ë„ˆë¬´ ë§ì€ ë°°ë„ˆë¡œ ì‚¬ìš©ì í”¼ë¡œë„ ì¦ê°€
- **í•´ê²°**: 80% ì„ê³„ê°’, 7ì¼ ì¬í‘œì‹œ ì£¼ê¸°
- **êµí›ˆ**: ì‚¬ìš©ì ê²½í—˜ì„ ìœ„í•œ ì ì ˆí•œ ì œí•œ í•„ìš”

---

## âœ… TASK_DONE

**P6-T6.8: ë¬´ë£Œ ì‚¬ìš©ìë¥¼ ìœ„í•œ ì—…ê·¸ë ˆì´ë“œ ìœ ë„ ë°°ë„ˆ** ì™„ë£Œ!

### ê²€ì¦ ê²°ê³¼
- âœ… npm test: 67/67 í†µê³¼
- âœ… npm lint: ì—ëŸ¬ ì—†ìŒ
- âœ… npm build: ì„±ê³µ
- âœ… npx tsc --noEmit: íƒ€ì… ì—ëŸ¬ ì—†ìŒ
- âœ… ë°ëª¨ í˜ì´ì§€: http://localhost:3000/demo/subscription-banners
- âœ… ì ‘ê·¼ì„±: WCAG AA ì¤€ìˆ˜

### ë‹¤ìŒ ë‹¨ê³„
1. **P6-T6.9**: ê²°ì œ í˜ì´ì§€ UI (Toss Payments ì—°ë™)
2. **P6-T6.10**: ê²°ì œ ì„±ê³µ/ì‹¤íŒ¨ ì²˜ë¦¬
3. **P6-T6.11**: êµ¬ë… ê´€ë¦¬ í˜ì´ì§€
